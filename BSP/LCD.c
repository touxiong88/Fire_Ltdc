#include "LCD.h"

const uint16_t init_dat[68]=
{
0x0003,
//0x0121,
0x0227,
0x032e,//V
0x0463,//H
0x0587,//07,input control
0x0680,// D7 			D6 D5 D4 D3 D2 D1 D0
			 // 4:3/3:2             UD RL  
0x0720,// D7 D6 D5 D4 D3 D2 D1 D0
			 //                      HSYNC
0x081B,
0x0900,// D7 	D6 D5 D4  D3 D2 D1 D0
			 //               16:9
0x0A25,
0x0B20,
0x0C20,
0x0D0D,
0x0E20,
0x0F20,
0x1040,
0x113F,
0x1231,
0x1340,
0x1408,
0x1506,
0x16B4,
0x1700,
0x1888,
0x19FF,
0x1A00,
0x1B80,
0x1C00,
0x1D00,
0x1E00,
0x1F3F,
0x2085,
0x2189,
0x2287,
0x2387,
0x2487,
0x258C,
0x2683,
0x270C,
0x282B,
0x2923,
0x2A28,
0x2B28,
0x2C30,
0x2D3B,
0x2E00,
0x2F08,
0x3000,
0x3100,
0x3200,
0x3300,
0x3400,
0x3500,
0x3600,
0x3700,
0x3800,
0x3900,
0x3A00,
0x3B00,
0x3C00,
0x3D00,
0x3E00,
0x3F00,
0x4000,
0x418E,
0x42A0,
0x4300,
0x4429,
//0x0600,
};

void SPI2_Reg_Write(void)
{
	uint8_t regH;
	uint8_t regL;
	HAL_GPIO_WritePin(CS_GPIO_Port, CS_Pin, GPIO_PIN_RESET);
	for(uint8_t i=0;i<sizeof(init_dat);i++)
	{
		regH=init_dat[i]>>8;
		regL=init_dat[i];
		if(HAL_SPI_Transmit(&hspi2, (uint8_t *)&regH, 1, 1000)!=HAL_OK)
		{
		}
		if(HAL_SPI_Transmit(&hspi2, (uint8_t *)&regL, 1, 1000)!=HAL_OK)
		{
		}
	}
	HAL_GPIO_WritePin(CS_GPIO_Port, CS_Pin, GPIO_PIN_SET);
}

void SPI_SendData(uint8_t addr,uint8_t dat)
{
	HAL_GPIO_WritePin(CS_GPIO_Port, CS_Pin, GPIO_PIN_RESET);
	__NOP();__NOP();__NOP();__NOP();__NOP();
	HAL_SPI_Transmit(&hspi2,(uint8_t *)&addr,1,0xFF);
	HAL_SPI_Transmit(&hspi2,(uint8_t *)&dat,1,0xFF);
	HAL_GPIO_WritePin(CS_GPIO_Port, CS_Pin, GPIO_PIN_SET);
}
void LCD_Reset(void)
{
	HAL_GPIO_WritePin(LCD_RST_GPIO_Port, LCD_RST_Pin, GPIO_PIN_RESET);
	HAL_Delay(500);
	HAL_GPIO_WritePin(LCD_RST_GPIO_Port, LCD_RST_Pin, GPIO_PIN_SET);
}
void LCD_Configuration(void)
{
	LCD_Reset();
	SPI_SendData(0x00,0x03);
//	SPI_SendData(0x01,0x21);
	SPI_SendData(0x02,0x27);
	SPI_SendData(0x03,0xEF);
	SPI_SendData(0x04,0x7B);
	SPI_SendData(0x05,0x8C);
	SPI_SendData(0x06,0x80);
	SPI_SendData(0x07,0x97);
	SPI_SendData(0x08,0x1B);
	SPI_SendData(0x09,0x01);
	SPI_SendData(0x0A,0x25);
	SPI_SendData(0x0B,0x20);
	SPI_SendData(0x0C,0x20);
	SPI_SendData(0x0D,0x0D);
	SPI_SendData(0x0E,0x20);
	SPI_SendData(0x0F,0x20);
	SPI_SendData(0x10,0x40);
	SPI_SendData(0x11,0x3F);
	SPI_SendData(0x12,0x31);
	SPI_SendData(0x13,0x40);
	SPI_SendData(0x14,0x08);
	SPI_SendData(0x15,0x06);
	SPI_SendData(0x16,0x08);
	SPI_SendData(0x17,0x0A);
	SPI_SendData(0x18,0x35);
	SPI_SendData(0x19,0xFF);
	SPI_SendData(0x1A,0x00);
	SPI_SendData(0x1B,0x80);
	SPI_SendData(0x1C,0x00);
	SPI_SendData(0x1D,0x00);
	SPI_SendData(0x1E,0x00);
	SPI_SendData(0x1F,0x3F);
	SPI_SendData(0x20,0x85);
	SPI_SendData(0x21,0x80);
	SPI_SendData(0x22,0x80);
	SPI_SendData(0x23,0x80);
	SPI_SendData(0x24,0x00);
	SPI_SendData(0x25,0x80);
	SPI_SendData(0x26,0x80);
	SPI_SendData(0x27,0x0C);
	SPI_SendData(0x28,0x2B);
	SPI_SendData(0x29,0x23);
	SPI_SendData(0x2A,0x28);
	SPI_SendData(0x2B,0x28);
	SPI_SendData(0x2C,0x30);
	SPI_SendData(0x2D,0x3B);
	SPI_SendData(0x2E,0x00);
	SPI_SendData(0x2F,0x08);
	SPI_SendData(0x30,0x00);
	SPI_SendData(0x31,0x00);
	SPI_SendData(0x32,0x00);
	SPI_SendData(0x33,0x00);
	SPI_SendData(0x34,0x00);
	SPI_SendData(0x35,0x00);
	SPI_SendData(0x36,0x00);
	SPI_SendData(0x37,0x00);
	SPI_SendData(0x38,0x00);
	SPI_SendData(0x39,0x00);
	SPI_SendData(0x3A,0x00);
	SPI_SendData(0x3B,0x00);
	SPI_SendData(0x3C,0x00);
	SPI_SendData(0x3D,0x00);
	SPI_SendData(0x3E,0x00);
	SPI_SendData(0x3F,0x00);
	SPI_SendData(0x40,0x00);
	SPI_SendData(0x41,0x8E);
	SPI_SendData(0x42,0xA0);
	SPI_SendData(0x43,0x00);
	SPI_SendData(0x44,0x29);
}






